/*! fetch-Module - v0.1.0 - 2015-05-12 09:54:18 */
define("widget/ui/lazyload/jquery-image-lazyload",["jquery"],function(a,b,c){"use strict";var d=a("jquery"),e=d(window);d.fn.lazyload=function(a){function b(){var a=0;f.each(function(){var b=d(this);if(!g.skip_invisible||b.is(":visible"))if(d.abovethetop(this,g)||d.leftofbegin(this,g));else if(d.belowthefold(this,g)||d.rightoffold(this,g)){if(++a>g.failure_limit)return!1}else b.trigger("appear"),a=0})}var c,f=this,g={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return a&&(void 0!==a.failurelimit&&(a.failure_limit=a.failurelimit,delete a.failurelimit),void 0!==a.effectspeed&&(a.effect_speed=a.effectspeed,delete a.effectspeed),d.extend(g,a)),c=void 0===g.container||g.container===window?e:d(g.container),0===g.event.indexOf("scroll")&&c.bind(g.event,function(){return b()}),this.each(function(){var a=this,b=d(a);a.loaded=!1,(void 0===b.attr("src")||b.attr("src")===!1)&&b.is("img")&&b.attr("src",g.placeholder),b.one("appear",function(){if(!this.loaded){if(g.appear){var c=f.length;g.appear.call(a,c,g)}d("<img />").bind("load",function(){var c=b.attr("data-"+g.data_attribute);b.hide(),b.is("img")?b.attr("src",c):b.css("background-image","url('"+c+"')"),b[g.effect](g.effect_speed),a.loaded=!0;var e=d.grep(f,function(a){return!a.loaded});if(f=d(e),g.load){var h=f.length;g.load.call(a,h,g)}}).attr("src",b.attr("data-"+g.data_attribute))}}),0!==g.event.indexOf("scroll")&&b.bind(g.event,function(){a.loaded||b.trigger("appear")})}),e.bind("resize",function(){b()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(a){a.originalEvent&&a.originalEvent.persisted&&f.each(function(){d(this).trigger("appear")})}),d(document).ready(function(){b()}),this},d.belowthefold=function(a,b){var c;return c=void 0===b.container||b.container===window?(window.innerHeight?window.innerHeight:e.height())+e.scrollTop():d(b.container).offset().top+d(b.container).height(),c<=d(a).offset().top-b.threshold},d.rightoffold=function(a,b){var c;return c=void 0===b.container||b.container===window?e.width()+e.scrollLeft():d(b.container).offset().left+d(b.container).width(),c<=d(a).offset().left-b.threshold},d.abovethetop=function(a,b){var c;return c=void 0===b.container||b.container===window?e.scrollTop():d(b.container).offset().top,c>=d(a).offset().top+b.threshold+d(a).height()},d.leftofbegin=function(a,b){var c;return c=void 0===b.container||b.container===window?e.scrollLeft():d(b.container).offset().left,c>=d(a).offset().left+b.threshold+d(a).width()},d.inviewport=function(a,b){return!(d.rightoffold(a,b)||d.leftofbegin(a,b)||d.belowthefold(a,b)||d.abovethetop(a,b))},d.extend(d.expr[":"],{"below-the-fold":function(a){return d.belowthefold(a,{threshold:0})},"above-the-top":function(a){return!d.belowthefold(a,{threshold:0})},"right-of-screen":function(a){return d.rightoffold(a,{threshold:0})},"left-of-screen":function(a){return!d.rightoffold(a,{threshold:0})},"in-viewport":function(a){return d.inviewport(a,{threshold:0})},"above-the-fold":function(a){return!d.belowthefold(a,{threshold:0})},"right-of-fold":function(a){return d.rightoffold(a,{threshold:0})},"left-of-fold":function(a){return!d.rightoffold(a,{threshold:0})}})});