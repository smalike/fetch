/*! fetch-Module - v0.1.0 - 2015-04-23 12:23:41 */
define("common:chinaso/page/controller/transform.carousel",function(a,b,c){function d(b){var c=this;this.initialize.call(this,b),a(["common:chinaso/page/common/ie.version"],function(a){c.ieVertion=a})}jQuery.extend(d.prototype,{initialize:function(a){this.defaults={langer:1,area:[{width:205,height:205,top:40,left:0,zIndex:1},{width:240,height:240,top:20,left:162,zIndex:2},{width:275,height:275,top:0,left:325,zIndex:3},{width:240,height:240,top:20,left:520,zIndex:2},{width:205,height:205,top:40,left:715,zIndex:1}]},this.defaults=jQuery.extend(this.defaults,a),this.wrap="string"==typeof this.defaults.id?document.getElementById(this.defaults.id):this.defaults.id,this.buildFrame(),this.prev=this.wrap.getElementsByTagName("span")[0],this.next=this.wrap.getElementsByTagName("span")[1],this.timer=1e3,this.iCenter=2,this.initHandler()},initHandler:function(){var a=this;this._doPrev=function(){return a.doPrev.apply(a)},this._doNext=function(){return a.doNext.apply(a)},this.addEvent(this.prev,"click",this._doPrev),this.addEvent(this.next,"click",this._doNext),this.doImgClick(),this.timer=setInterval(function(){a.doNext()},3e3),this.wrap.onmouseover=function(){clearInterval(a.timer)},this.wrap.onmouseout=function(){clearInterval(a.timer),a.timer=setInterval(function(){a.doNext()},3e3)}},resite:function(){this.buildFrame()},updateWidth:function(a){this.defaults.langer=a},buildFrame:function(){if(this.aSort=[],this.oUl=this.wrap.getElementsByTagName("ul")[0],this.aLi=this.wrap.getElementsByTagName("li"),!this.aLi.length)return!1;for(var a=0;a<this.aLi.length;a++)this.aSort[a]=this.aLi[a];return this.aSort.unshift(this.aSort.pop()),this.setUp(),this.doImgClick(),1},doPrev:function(){this.aSort.unshift(this.aSort.pop()),this.setUp()},doNext:function(){this.aSort.push(this.aSort.shift()),this.setUp()},doImgClick:function(){for(var a=this,b=0;b<this.aSort.length;b++)this.aSort[b].onclick=function(){if(this.index>a.iCenter){for(var b=0;b<this.index-a.iCenter;b++)a.aSort.push(a.aSort.shift());return a.setUp(),!1}if(this.index<a.iCenter){for(var b=0;b<a.iCenter-this.index;b++)a.aSort.unshift(a.aSort.pop());return a.setUp(),!1}}},setUp:function(){var a=this,b=0;if(!this.aLi.length)return!1;for(b=0;b<this.aSort.length;b++)this.oUl.appendChild(this.aSort[b]);for(b=0;b<this.aSort.length;b++)this.aSort[b].index=b,2===b?(a.css3d(this.aSort[b],"perspective",""),a.css3d(this.aSort[b],"perspective-origin",""),a.css3d(this.aSort[b],"transform","translateX(0px)"),a.setInfo(this.aSort[b].getAttribute("data-url"),this.aSort[b].getAttribute("data-desc")),a.css3d(this.aSort[b].getElementsByTagName("img")[0],"box-reflect","below 1px -webkit-gradient(linear, 0% 100%,100% 100%, from(rgba(255,255,255,0)), to(white))"),a.css3d(this.aSort[b].getElementsByTagName("a")[0],"transform","rotateY(0deg)"),a.css(this.aSort[b].getElementsByTagName("img")[0],"filter",0)):b>2?(a.css3d(this.aSort[b],"perspective","1200px"),a.css3d(this.aSort[b],"perspective-origin","64% 47%"),a.css3d(this.aSort[b],"transform","translateX(140px)"),a.css3d(this.aSort[b].getElementsByTagName("img")[0],"box-reflect",""),a.css3d(this.aSort[b].getElementsByTagName("a")[0],"transform","rotateY(-60deg)")):2>b&&(a.css3d(this.aSort[b],"perspective","1200px"),a.css3d(this.aSort[b],"perspective-origin","47% 47%"),a.css3d(this.aSort[b],"transform","translateX(-140px)"),a.css3d(this.aSort[b].getElementsByTagName("img")[0],"box-reflect",""),a.css3d(this.aSort[b].getElementsByTagName("a")[0],"transform","rotateY(60deg)")),0===b||4===b?a.css3d(this.aSort[b].getElementsByTagName("img")[0],"filter",0):(1===b||3===b)&&a.css3d(this.aSort[b].getElementsByTagName("img")[0],"filter",0),5>b?(this.css(this.aSort[b],"display","block"),this.doMove(this.aSort[b],this.defaults.area[b],function(){a.doMove(a.aSort[a.iCenter].getElementsByTagName("img")[0],{opacity:100},function(){a.doMove(a.aSort[a.iCenter].getElementsByTagName("img")[0],{opacity:100},function(){a.aSort[a.iCenter].onmouseover=function(){a.doMove(this.getElementsByTagName("div")[0],{bottom:0})},a.aSort[a.iCenter].onmouseout=function(){a.doMove(this.getElementsByTagName("div")[0],{bottom:-100})}})})})):(this.css(this.aSort[b],"display","none"),this.css(this.aSort[b],"width",0),this.css(this.aSort[b],"height",0),this.css(this.aSort[b],"top",37),this.css(this.aSort[b],"left",this.oUl.offsetWidth/2)),b<this.iCenter||b>this.iCenter?(this.css(this.aSort[b].getElementsByTagName("img")[0],"opacity",100),this.aSort[b].onmouseover=function(){a.doMove(this.getElementsByTagName("img")[0],{opacity:100})},this.aSort[b].onmouseout=function(){a.doMove(this.getElementsByTagName("img")[0],{opacity:100})},this.aSort[b].onmouseout()):this.aSort[b].onmouseover=this.aSort[b].onmouseout=null},addEvent:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},css3d:function(a,b,c){if(this.ieVertion&&this.ieVertion<10)return!1;try{a.style["-webkit-"+b]=c,a.style["-moz-"+b]=c,a.style["-ms-"+b]=c,a.style["-o-"+b]=c,a.style[b]=c}catch(d){}},css:function(a,b,c){if(2==arguments.length)return a.currentStyle?a.currentStyle[b]:getComputedStyle(a,null)[b];if(3==arguments.length)switch(b){case"width":case"height":case"top":case"left":case"bottom":a.style[b]=c/this.defaults.langer+"px";break;case"opacity":a.style.filter="alpha(opacity="+c+")",a.style.opacity=c/100;break;default:a.style[b]=c}},setInfo:function(a,b){var c=this.wrap.getElementsByTagName("div")[0];c=c.getElementsByTagName("a")[0],c.innerHTML=b,c.setAttribute("href",a)},doMove:function(a,b,c){var d=this;a&&(a.timer&&clearInterval(a.timer),a.timer=setInterval(function(){var e=!0;for(var f in b){var g=parseFloat(d.css(a,f));"opacity"==f&&(g=parseInt(100*g.toFixed(2)));var h=(b[f]-g)/5;h=h>0?Math.ceil(h):Math.floor(h),g!=b[f]&&(e=!1,d.css(a,f,g+h))}e&&(clearInterval(a.timer),c&&c.apply(d,arguments))},30))}}),c.exports={build:function(a){var b;return b=new d(a)}}});