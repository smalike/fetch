/*! fetch-Module - v0.1.0 - 2015-04-23 12:23:41 */
define("common:chinaso/page/controller/paging",function(a,b,c){function d(a){this.defaults={url:"",prefix:"",jsonName:"data",suffix:".json",curShow:null,curShowType:0,pageDisplayCount:4,scrollEle:null,scrollSpeed:null,globePageIndex:null,buildTitleHtml:function(){},complate:function(){}},this.defaults=jQuery.extend(this.defaults,a),this.initialized()}jQuery.extend(d.prototype,{isShowOption:function(){return!0},initialized:function(a){var b=this;b.executeAjax(),$(document).on("click",".page a",function(){var c=$(this).data("pageindex");return b.defaults.curShow.data("pageindex",c),a||b.scrollTop(b.defaults.scrollEle,b.defaults.scrollSpeed),b.executeAjax(c,!0),!1})},executeAjax:function(a,b){var c=this,d="";c.defaults.globePageIndex=a=a||1,a>1&&(d="_"+a);var e=c.defaults.url+c.defaults.prefix+"/"+c.defaults.jsonName+d+c.defaults.suffix;c.send(e,{},"json").done(function(d){d.data&&d.data.length>0&&(c.buildTitleHtml(d,b),c.isShowOption(d)&&d.totalPage>1&&c.buildPage(d,a)),c.complate()}).fail(function(a){})},buildTitleHtml:function(a){var b=this;b.defaults.buildTitleHtml(a)},buildPage:function(a,b){var c=this,d='<div class="page clearb">';b>1&&(d+='<span class="page_pre"><a href="javascript:void(0);" data-pageindex="'+(b-1)+'"><上一页</a></span>');for(var e=0;e<a.totalPage;e++)b==e+1?d+="<span>"+(e+1)+"</span>":e+1-b<=c.defaults.pageDisplayCount&&e+1>b||b-(e+1)<=c.defaults.pageDisplayCount&&b>e+1||0===e?d+='<span><a href="javascript:void(0);" data-pageindex="'+(e+1)+'">'+(e+1)+"</a></span>":(e+1-b<=c.defaults.pageDisplayCount+1&&e+1>b||b-(e+1)<=c.defaults.pageDisplayCount+1&&b>e+1)&&(d+="<span>...</span>");b<a.totalPage&&(d+='<span class="page_next"><a href="javascript:void(0);" data-pageindex="'+(b+1)+'">下一页></a></span>'),d+="</div>",c.defaults.curShow.eq(0).append(d)},complate:function(a){var b=this;b.defaults.complate(a)},scrollTop:function(a,b){var c,d=0;a&&(/^\d+$/.test(a)?d=a:(c=$(a),c.length>0&&(d=c.offset().top))),b=b||200,$("html, body").animate({scrollTop:d+"px"},b)},send:function(a,b,c){var d="?";return b=b||{},-1!==a.indexOf("?")&&(d="&"),a+=d+(new Date).getTime(),c=c||"html",$.ajax({url:a,params:b,type:"get",dataType:c,cache:!1})}}),c.exports={build:function(a){var b;return b=new d(a)}}});