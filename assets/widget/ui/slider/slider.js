/*! fetch-Module - v0.1.0 - 2015-05-12 09:54:18 */
define("widget/ui/slider/slider",["jquery"],function(a,b,c){"use strict";function d(a){var b,c=this;this.showIndex=0,this.defaults={},"string"==typeof a?this.defaults.container=a:this.defaults=jQuery.extend(this.defaults,a),this.$container=jQuery(this.defaults.container),this.$container.find("a.bg-focus").remove(),this.$smallCon=this.$container.find("div.small-imgBanner"),this.$control=this.$smallCon.find("div.focus-control"),setTimeout(function(){c.getConWidth()},300),this.$smallCon.find("a.arr-left").on("click",function(){return c.moveSmall(-1),!1}),this.$smallCon.find("a.arr-right").on("click",function(){return c.moveSmall(1),!1}),this.$smallCon.find("li").on({mouseover:function(){var a=this;clearTimeout(c.liMousOvTimeId),c.liMousOvTimeId=setTimeout(function(){c.showView(a)},300)},mouseout:function(){clearTimeout(c.liMousOvTimeId)},click:function(){return clearTimeout(c.liMousOvTimeId),c.showView(this),!1}}),this.$liItem=this.$control.find("li"),b=this.$liItem.outerWidth()*this.$liItem.length,this.$control.find("ul").width(b),this.showView(this.$smallCon.find("li").eq(0)),e(window).on("resize",function(){c.clearTimeout(),clearTimeout(this.resizeTimeId),this.resizeTimeId=setTimeout(function(){c.updateConWidth(),c.delayPlay()},300)}),this.delayPlay(),this.$container.on({mouseover:function(){c.clearTimeout()},mouseout:function(){c.delayPlay()}})}var e=a("jquery");jQuery.extend(d.prototype,{updateConWidth:function(){this.getConWidth()},getConWidth:function(){var a,b=this.$control.width();this.$liItem=this.$control.find("li"),a=this.$liItem.outerWidth(),this.showCount=Math.floor(b/a)},clearTimeout:function(){clearTimeout(this.delayTimeId),clearTimeout(this.autoTimeId)},delayPlay:function(){var a=this;a.clearTimeout(),this.delayTimeId=setTimeout(function(){a.autoPlay()},3e3)},autoPlay:function(){var a=this;this.curIndex=~~e("div.focus-control li.active").index("div.focus-control li"),this.curIndex++,this.nextMove(),this.autoTimeId=setTimeout(function(){a.autoPlay()},3e3)},nextMove:function(){var a=Math.abs(this.showCount);this.curIndex>=this.$liItem.length&&(this.curIndex=0),(this.curIndex+1>this.showIndex+a||this.curIndex<this.showIndex)&&(this.showIndex=this.curIndex-a,this.moveSmall(1)),this.showView(this.$liItem.eq(this.curIndex))},moveSmall:function(b){var c,d,e=this;this.showCount=~~(b*Math.abs(this.showCount)),this.showCount>0?this.showIndex+this.showCount>=this.$liItem.length?this.showIndex=0:(this.showIndex+=this.showCount,d=this.showIndex+this.showCount,d>this.$liItem.length&&(c=d-this.$liItem.length,this.showIndex-=c)):this.showIndex<=0?this.showIndex=this.$liItem.length+this.showCount:(this.showIndex+=this.showCount,d=this.showIndex,0>d&&(this.showIndex=0)),this.$liItem.parent().children(":lt("+this.showIndex+")").hide().end().children(":gt("+this.showIndex+")").show(),this.$liItem.eq(this.showIndex).show(),a(["utils/event/publish"],function(a){a({attrs:e.$smallCon.find("a.arr-left").data("bind")})})},showView:function(a){var b=e(a),c=this.$container.find("a.bg-focus"),d=c.eq(~~b.index("div.focus-control li"));d.length?d.css("background-image")!=="url("+b.data("image")+")"&&(d=e('<a href="###" class="focus-image bg-focus" target="_blank"></a>').css({"background-image":"url("+b.data("image")+")","background-color":b.data("bcolor")}).attr("href",b.data("url")).insertBefore(d)):(d=e('<a href="###" class="focus-image bg-focus" target="_blank"></a>'),d.css({"background-image":"url("+b.data("image")+")","background-color":b.data("bcolor")}).attr("href",b.data("url")),this.$container.find("div.focus-ctn").append(d)),b.addClass("active").siblings("li").removeClass("active"),d.show().siblings("a").hide()}}),c.exports={build:function(a){var b;return b=new d(a)}}});