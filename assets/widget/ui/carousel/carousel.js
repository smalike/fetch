/*! fetch-Module - v0.1.0 - 2015-05-12 13:57:33 */
define("widget/ui/carousel/carousel",["jquery"],function(a,b,c){"use strict";function d(a){this.defaults={leftEle:".arr-left",rightEle:".arr-right",dot:".trigger-dot a",auto:!1},"string"==typeof a?this.defaults.container=a:this.defaults=e.extend(this.defaults,a),this.defaults.$container=e(this.defaults.container),this.$content=this.defaults.$container.find("ul"),this.initialize(),this.initDot(),this.eventHandler(),this.isAutoPlay()}var e=a("jquery");e.extend(d.prototype,{eventHandler:function(){var a=this;this.defaults.$container.on({mouseover:function(){clearTimeout(a.autoClearTimeId)},mouseout:function(){a.isAutoPlay()}}),this.defaults.$container.find(this.defaults.rightEle).on("click",function(){return!a.$content.is(":animated")&&a.carouselExc(-1),!1}),this.defaults.$container.find(this.defaults.leftEle).on("click",function(){return!a.$content.is(":animated")&&a.carouselExc(1),!1}),$(window).on("resize",function(){clearTimeout(a.resizeTimeId),a.resizeTimeId=setTimeout(function(){a.initialize()},200)})},isAutoPlay:function(){this.defaults.auto&&this.autoPlay()},autoPlay:function(){var a=this;clearTimeout(this.autoClearTimeId),this.autoClearTimeId=setInterval(function(){!a.$content.is(":animated")&&a.carouselExc(-1)},5e3)},carouselExc:function(a){var b=this,c=this.defaults.content?this.defaults.$container.find(this.defaults.content).width()+this.marLimitWi:this.defaults.$container.width()+this.marLimitWi,d=this.$content.position().left,e=d+a*Math.floor(c/this.itemWidth)*this.itemWidth,f=this.$content.width(),g=Math.abs(e),h=c%this.itemWidth;~a?d>=0?e=-(f-c):e>0&&(e=0):g+h>=f?e=0:g+c>f&&(e=-(f-c)),b.updateDotPosition(a),this.$content.animate({left:e},500,function(){})},initDot:function(){var a=this;this.dotIndex=0,this.$dot=this.defaults.$container.find(this.defaults.dot),this.$dot.on("click",function(){var b=$(this).index(this.selector);console.log(b),console.log(a.dotIndex),!a.$content.is(":animated")&&a.dotIndex-b!==0&&a.carouselExc(a.dotIndex-b)})},updateDotPosition:function(a){var b=this.$content.find("li").length;this.dotIndex+=-a,this.dotIndex>=b?this.dotIndex=0:this.dotIndex<0&&(this.dotIndex=b-1),this.$dot.removeClass("cur").eq(this.dotIndex).addClass("cur")},initialize:function(){this.getContentWidth()},getContentWidth:function(){var a=this.$content.find("li"),b=a.outerWidth(!0),c=a.outerWidth();this.marLimitWi=b-c,this.itemWidth=a.outerWidth(!0),this.$content.width(this.itemWidth*a.length)}}),c.exports={build:function(a){var b;return b=new d(a)}}});