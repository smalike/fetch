/*! fetch-Module - v0.1.0 - 2015-04-23 12:23:41 */
define("common:chinaso/page/controller/tag.cloud",function(a,b,c){function d(a){this.defaults={},this.defaults=jQuery.extend(this.defaults,a),this.$container=jQuery(this.defaults.container),p=Math.min(this.$container.height(),this.$container.width())/2,this.build()}var e,f,g,h,i,j,k,l,m,n=Math.PI/180,o=[],p=90,q=1,r=1,s=300,t=!0,u=0,v=0,w=250,x=10;jQuery.extend(d.prototype,{build:function(){var a,b=this;this.$container.find(this.defaults.tag).each(function(){a=b.randomCls(),jQuery(this).addClass(a),k={},k.offsetWidth=this.offsetWidth,k.offsetHeight=this.offsetHeight,o.push(k)}).on({mouseover:function(){jQuery(this).addClass("cur").siblings().removeClass("cur")},mouseout:function(){jQuery(this).removeClass("cur")}}),this.sineCosine(0,0,0),this.positionAll(),this.$container.on({mouseover:function(){l=!0},mouseout:function(){l=!1},mousemove:function(a){var b=$(this),c=window.event||a;u=-(c.pageX-(b.offset().left+b.width()/2)),v=-(c.pageY-(b.offset().top+b.height()/2)),u/=5,v/=5}}),setInterval(function(){b.updatePosition()},30)},sineCosine:function(a,b,c){e=Math.sin(a*n),f=Math.cos(a*n),g=Math.sin(b*n),h=Math.cos(b*n),i=Math.sin(c*n),j=Math.cos(c*n)},updatePosition:function(){var a,b,c,d,k,n,t,y,z,A,B,C,D=0;if(l?(B=-Math.min(Math.max(-v,-w),w)/p*x,C=Math.min(Math.max(-u,-w),w)/p*x):(B=.98*q,C=.98*r),q=B,r=C,!(Math.abs(B)<=.01&&Math.abs(C)<=.01)){for(this.sineCosine(B,C,D),a=0;a<o.length;a++)c=o[a].cx,b=o[a].cy*f+o[a].cz*-e,d=o[a].cy*e+o[a].cz*f,n=c*h+d*g,k=b,t=c*-g+d*h,z=n*j+k*-i,y=n*i+k*j,A=t,o[a].cx=z,o[a].cy=y,o[a].cz=A,m=s/(s+A),o[a].scale=m,o[a].alpha=m,o[a].alpha=(o[a].alpha-.6)*(10/6);this.doPosition()}},doPosition:function(){var a=this;this.$container.find(this.defaults.tag).each(function(b){this.style.left=o[b].cx+a.$container.width()/2-o[b].offsetWidth/2+"px",this.style.top=o[b].cy+a.$container.height()/2-o[b].offsetHeight/2+"px",this.style.fontSize=Math.ceil(12*o[b].scale/2)+8+"px",this.style.filter="alpha(opacity="+100*o[b].alpha+")",this.style.opacity=o[b].alpha})},positionAll:function(){var a=this,b=0,c=0,d=o.length;this.$container.find(this.defaults.tag).each(function(e){t?(b=Math.acos(-1+2*e/d),c=Math.sqrt(d*Math.PI)*b):(b=Math.random()*Math.PI,c=2*Math.random()*Math.PI),o[e].cx=p*Math.cos(c)*Math.sin(b),o[e].cy=p*Math.sin(c)*Math.sin(b),o[e].cz=p*Math.cos(b),this.style.left=o[e].cx+a.$container.width()/2-o[e].offsetWidth/2+"px",this.style.top=o[e].cy+a.$container.height()/2-o[e].offsetHeight/2+"px"})},randomPosition:function(){Math.random()},randomCls:function(){var a=this.defaults.cls;return a[Math.floor(Math.random()*a.length)]}}),c.exports={build:function(a){var b;return b=new d(a)}}});